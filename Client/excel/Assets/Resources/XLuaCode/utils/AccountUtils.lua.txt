---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by asus.
--- DateTime: 2018/4/10 14:01
---
local AccountUtils = {}

local Json = app.util.JsonUtils

function AccountUtils.addAccountHistory(history, account, password)
    if not account or account == "" then return end

    history = checktable(history)
    local old
    for i,v in ipairs(history) do
        if v.account == account then
            v.password = password
            old = v
            table.remove(history, i)
            break
        end
    end

    old = old or {account = account, password = password}
    table.insert(history, 1, old)

    for i=11,#history do
        table.remove(history)
    end

    return history
end

function AccountUtils.saveAccountHistory(history)
    if not history then return end

    --table.insert(history,1, util.getVersion())

    local json = Json.encode(history)

    for i,v in ipairs(history) do
        if i > 10 --[[app.constant.account_history_upper]]--
        then
            break
        end

        local record = history[i]
        --file:write(record.account .. "=" .. util.encodePwd(record.password) .. "\n")
    end
    file:close()
end



return AccountUtils