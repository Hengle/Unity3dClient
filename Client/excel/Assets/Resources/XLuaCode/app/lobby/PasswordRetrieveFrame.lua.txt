---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by asus.
--- DateTime: 2018/4/10 16:51
---
local PasswordRetrieveFrame = {}

function PasswordRetrieveFrame.OnOpenFrame()
    self.frame:GetObject('btn_close').onClick:AddListener(AccountRegisterFrame.onClickClose)
    self.frame:GetObject('btn_retrieve_password').onClick:AddListener(AccountRegisterFrame.onClickRetrievePassword)
    self.frame:GetObject('btn_get_verify_code').onClick:AddListener(AccountRegisterFrame.onClickGetVerifyCode)
end

PasswordRetrieveFrame.onClickClose = function()
    app.FrameManager.CloseFrame(self.frame)
end

PasswordRetrieveFrame.onClickRetrievePassword = function()
    local phoneNumber = self.frame:GetObject("txt_phone_number").text
    local password = self.frame:GetObject("txt_password").text
    local passwordRepeat = self.frame:GetObject("txt_password_repeat").text
    local verifyCode = self.frame:GetObject("txt_verify_code").text
end

PasswordRetrieveFrame.onClickGetVerifyCode = function()
    --TODO 获取验证码逻辑实现
end

function PasswordRetrieveFrame.OnCloseFrame()
end

-- ----------------------------------------控制代码--------------------------------------------------
function PasswordRetrieveFrame:checkRegisterInput(account, password, passwordRepeat, verifyCode)
    local err
    if not account or #account == 0 then
        err = app._ErrorCode.account_nil
    elseif #account < 6 or #account > 20 or string.find(account, "[%W%.%-_]") then
        err = app._ErrorCode.account_error
    elseif not password or #password == 0 then
        err = app._ErrorCode.password_nil
    elseif #password < 6 or #password > 20 or string.find(password, "[%W%.%-_]") then
        err = app._ErrorCode.password_error
    elseif password ~= passwordRepeat then
        err = app._ErrorCode.password_repeat_error
    elseif verifyCode and (#verifyCode == 0 or #verifyCode > 6) then
        err = app._ErrorCode.reg_code_error
    end
    return err
end

return PasswordRetrieveFrame