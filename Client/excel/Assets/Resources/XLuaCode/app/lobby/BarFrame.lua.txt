---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by asus.
--- DateTime: 2018/4/17 20:04
---
local BarFrame = {}

local UserMessage = require(".net.UserMessage")

local Player = app.data.UserData.Player
local Account = app.data.UserData.Account

function BarFrame.OnOpenFrame()
    UserMessage.send("UserInfoReq", {uid=Account.uid}, handler(self,self.UserInfoRep))

    self.frame:GetObject("btn_quick_start").onClick:AddListener(BarFrame.onClickQuickStart)
    self.frame:GetObject("btn_charge").onClick:AddListener(BarFrame.onClickCharge)
    self.frame:GetObject("btn_bank").onClick:AddListener(BarFrame.onClickBank)
    self.frame:GetObject("btn_exchange").onClick:AddListener(BarFrame.onClickExchange)
    self.frame:GetObject("btn_announce").onClick:AddListener(BarFrame.onClickAnnounce)
    self.frame:GetObject("btn_club").onClick:AddListener(BarFrame.onClickClub)
    self.frame:GetObject("btn_agent").onClick:AddListener(BarFrame.onClickAgent)
    self.frame:GetObject("btn_setting").onClick:AddListener(BarFrame.onClickSetting)
    self.frame:GetObject("btn_subscription").onClick:AddListener(BarFrame.onClickSubscription)
    self.frame:GetObject("btn_addgold").onClick:AddListener(BarFrame.onClickAddgold)

    self.frame:GetObject("icon_head").onClick:AddListener(BarFrame.onClickHeadIcon)
end

BarFrame.onClickHeadIcon = function()
    app.FrameManager.OpenFrameLua(app._FrameList.PersonalFrame)
end

BarFrame.onClickQuickStart = function()
end

BarFrame.onClickCharge = function()
end

BarFrame.onClickBank = function()
    app.FrameManager.OpenFrameLua(app._FrameList.SafeBoxFrame)
end

BarFrame.onClickExchange = function()
    app.FrameManager.OpenFrameLua(app._FrameList.ExchangeFrame)
end

BarFrame.onClickAnnounce = function()
end

BarFrame.onClickClub = function()
end

BarFrame.onClickAgent = function()
end

BarFrame.onClickSetting = function()
end

BarFrame.onClickSubscription = function()
end

BarFrame.onClickAddgold = function()
end

function BarFrame.OnCloseFrame()
end

-- ----------------------------控制代码----------------------------------------

function BarFrame:UserInfoRep(msg, oldmsg)
    dump(msg, "LobbyFrame.UserInfoRep:")
    if msg.uid == Player.uid then
        self:moneyChanged()
        self:nicknameChanged()
        --[[self:changeAvatar()
        self.f = true]]--
    end
end

function BarFrame:moneyChanged()
    self.frame:GetObject('txt_gold').text = Player.gold
end

function BarFrame:nicknameChanged()
    self.frame:GetObject('txt_name').text = Player.nickname
end

return BarFrame