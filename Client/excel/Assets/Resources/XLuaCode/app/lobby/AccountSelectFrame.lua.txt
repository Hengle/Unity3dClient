---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by asus.
--- DateTime: 2018/4/8 11:25
---
local AccountSelectFrame = {}
local maxAccountCount = 6
local accountArray = {'nice','fuck','shenshaojun','wangzhe','dingjiaming'}

function AccountSelectFrame.OnOpenFrame()
    --self.accountHistory = AccountUtils.readAccountHistory()

    self.frame:GetObject('btn_login_other').onClick:AddListener(AccountSelectFrame.onClickLoginOther)



    self.frame:GetObject("btnLoginOther").onClick:AddListener(AccountSelectFrame.onClickLoginOther)
    self.frame:GetObject("btnRegister").onClick:AddListener(AccountSelectFrame.onClickRegister)
    self.frame:GetObject("btnBack").onClick:AddListener(AccountSelectFrame.onClickBack)
    self.frame:GetObject("btnConfirmLogin").onClick:AddListener(AccountSelectFrame.onClickConfirmLogin)

    local accountList = self.frame:GetObject('accountList')
    if accountList then
        accountList:Initialize()
        local accountCount = ((#accountArray > maxAccountCount) and {maxAccountCount} or {#accountArray})[1]
        print("accountCount", accountCount)
        accountList:SetElementAmount(accountCount)
        accountList.mOnListElementVisible = function(index,binder)

            if index >= 0 and index < accountCount then
                binder:GetObject('accountName').text = accountArray[index + 1]
                binder:GetObject('btnDelete').onClick:RemoveListener(AccountSelectFrame.onClickDeleteAccount)
                binder:GetObject('btnDelete').onClick:AddListener(AccountSelectFrame.onClickDeleteAccount)
            end
        end

        --[[accountList.mOnListElementChangeDisplay = function(elementIndex, binder, bSelected)
            binder:GetObject('accountName'):CustomActive(bSelected)
        end]]--
    end
end

AccountSelectFrame.onClickLoginOther = function()
    app.FrameManager.OpenFrameLua(app._FrameList.AccountLoginFrame)
end

AccountSelectFrame.onClickDeleteAccount = function()
    print("click callback invoked")
end

AccountSelectFrame.onClickRegister = function()
    app.FrameManager.OpenFrameLua(app._FrameList.AccountRegisterFrame)
end

AccountSelectFrame.onClickBack = function()
    app.FrameManager.CloseFrame(self.frame)
end

AccountSelectFrame.onClickConfirmLogin = function()
    --TODO 回传选定的账号给LoginFrame 并登录
end

function AccountSelectFrame.OnCloseFrame()

end

-- ---------------------显示控制接口AccountSelectPresenter调用--------------------------------


return AccountSelectFrame