---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by asus.
--- DateTime: 2018/4/18 19:07
---
local BaseMsgMgr = class("BaseMsgMgr")

local message = require(".net.Message")

BaseMsgMgr._session = nil

BaseMsgMgr.scene = nil

BaseMsgMgr._roomMsg = {}

BaseMsgMgr._handlers = {room=_roomMsg}

-- ------------------------------ room msg ------------------------------
function _roomMsg.InitGameScenes(msg)
    --util.setMyServerSeat(msg.seat)
    self._session = msg.session
    --vars.watching = msg.watching
    --vars.players = {}
end

function _roomMsg.EnterGame(msg)

end

-- ------------------------------ msg manager ------------------------------
function BaseMsgMgr:init(tableScene)
    self.scene = tableScene
end

function BaseMsgMgr:clear()

end

function BaseMsgMgr:sendMsg(name, msg)
    msg.session = _session
    message.sendMessage(name, msg)
end

function BaseMsgMgr:sendLeaveGame()
    message.dispatchGame("room.LeaveGame")
    self.scene = nil
end

function BaseMsgMgr:sendExitTable()
    message.dispatchGame("room.ExitTable")
    self.scene = nil
end

function BaseMsgMgr:sendReadyRequest()
    message.dispatchGame("room.ReadyReq")
end

function BaseMsgMgr:dispatch(name, msg)
    if self.scene == nil then
        print("this msgMgr's scene is nil !!!")
        return
    end

    local clsName, funcName = name:match "([^.]*).(.*)"
    assert(handlers[clsName], clsName .. " handler not exist!")
    if handlers[clsName] then
        assert(handlers[clsName][funcName], clsName.."Mgr have no func: "..funcName)
        handlers[clsName][funcName](msg)
    end
end

return BaseMsgMgr