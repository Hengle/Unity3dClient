LOGIN_SERVER = { ip="39.105.7.29", port=6001 }
GATE_SERVER = { ip="39.105.7.29", port=7001 }

local localHttpWeb = CS.NetWork.LocalHttpWebRequest()
local web = {}

function web.httpRequest(callback, svr, suburl, method, postdata)
    print(svr,suburl,method,postdata)
    local httpUrl = "http://"..svr.ip..":"..svr.port..suburl
    print('DoHttpRequest')
    if method == 'GET' then
        localHttpWeb:HttpGetRequest(httpUrl,callback)
    elseif method == 'POST' then
        localHttpWeb:HttpPostRequest(httpUrl,postdata,callback)
    end
end

function web.getServerTime(callback,server)
    web.httpRequest(callback,server,"/hello", "GET",nil,2000)
end

function web.ToPostData(postdata)
    local content = ""
    local first = true
    for k,v in pairs(postdata) do
        local value = k .. '=' .. v
        if first then
            content = value
            first = false
            CS.UnityEngine.Debug.LogError(content)
        else
            content = content .. '&' .. value
            CS.UnityEngine.Debug.LogError(content)
        end
    end
    return content
end

return web